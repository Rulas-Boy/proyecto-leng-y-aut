PARSER_BEGIN(test)
import java.io.PrintStream;
import java.util.ArrayList;

class test
{
    public static void main(String[] args) throws ParseException
    {
        try
        {
            test analizador = new test(System.in);

            analizador.Iniciar();

            System.out.println("\nLa cadena fue aceptada correctamente");
        }
        catch(ParseException e)
        {
            System.out.println(e.getMessage());

            System.out.println("Hubo un error y la cadena no fue aceptada.");
        }
    }

    public void Mensaje()
    {
        System.out.println("MENSAJE MENSAJE MENSAJE MENSAJE MENSAJE MENSAJE MENSAJE");
    }
}
PARSER_END(test)

SKIP : { " " | "\t" | "\n" | "\r" }

TOKEN :
{
    <#letraunica: ["a"-"z","A"-"Z"]> |
    <#dig: ["0"-"9"]>
}

TOKEN:
{
    <TipoDato: "bool" | "byte" | "char" | "int" | "double" | "float" | "string" | "var"> |
    
    <Asig: "="> |
    
    <OperadorLog: "and" | "&&" | "||" | "or" | "xor" | "<=" | ">=" | "==" | "!=" | "not"> |

    <Ciclo: "for" | "foreach" | "while" | "do" | "until"> {System.out.println("PINCHE CICLO ALV");}|
    
    <DecCaso: "if" | "elseif" | "elsif" | "elif" | "unless"> | // Declaracion de caso
    
    <Switch: "switch"> | // Declaración de múltiples casos
    
    <Case: "case"> | // Declaración de caso

    <Default: "default" | "else"> | // En caso de que no se cumpla una condición
    
    <ComIni: "/*" | "*/" | "//"> | // Comentarios
    
    <Operador: "+" | "-" | "*" | "/" | "**" | "%"> | // Operaciones aritméticas

    <ParIni: "("> |
    <ParFin: ")"> |
    
    <ArrIni: "["> |
    <ArrFin: "]"> |
    
    <CorIni: "{"> |
    <ConFin: "}"> |
    
    <Herencia: "extends" | "implements"> |
    
    <Privcidad: "public" | "private" | "protected"> | // Privcidad de variables
    
    <IncDec: "++" | "--"> | // Incremento o decremento de valor
    
    <Comis: "\"" | "'"> | // Comillas
    
    <Booleano: "true" | "false"> |
    
    <Nulo: "NULL" | "null" | "nil"> |
    
    <Split: "split" | "explode"> | // Separar cadena en arreglo
    <Implode: "implode"> | // Juntar arreglo en cadena
    
    <FunTri: "Sin" | "Cos" | "Tan"> | // Funciones trigonométricas
    
    <Trim: "Trim" | "LTrim" |"RTrim"> | // Cortar espacios extras de texto
    
    <ManArchivo: "Open" | "Close"> | // Abrir o cerrar archivo

    <Try: "try"> |
    <Catch: "catch"> |
    <Finally: "finally"> |
    
    <Absoluto: "abs"> {System.out.println("Token: Absoluto. Valor del atributo: " + image);} |
    <Abstracto: "abstract"> {System.out.println("Token: Abstracto. Valor del atributo: " + image);} |
    <Activar: "activate"> {System.out.println("Token: Activar. Valor del atributo: " + image);} |
    <Alias: "alias">  {System.out.println("Token: Alias. Valor del atributo: " + image);} |
    <Ascendiente: "ascatn"> {System.out.println("Ascendiente -> " + image);} |
    <Ensamblador: "asm"> {System.out.println("Ensamblador -> " + image);} |
    <Afirmar: "assert">  {System.out.println("Token: Afirmar. Valor del atributo: " + image);} |
    <Await: "await"> {System.out.println("Token: Await. Valor del atributo: " + image);} |
    <Base: "base">  {System.out.println("Token: Base. Valor del atributo: " + image);} |
    <Call: "call">  {System.out.println("Token: Call. Valor del atributo: " + image);} |
    <Callable: "callable">  {System.out.println("Token: Callable. Valor del atributo: " + image);} |
    <Choose: "choose">  {System.out.println("Token: Choose. Valor del atributo: " + image);} |
    <Class: "class">  {System.out.println("Token: Class. Valor del atributo: " + image);} |
    <Clear: "clear">  {System.out.println("Token: Clear. Valor del atributo: " + image);} |
    <Clone: "clone">  {System.out.println("Token: Clone. Valor del atributo: " + image);} |
    <Collection: "collection">  {System.out.println("Token: Collection. Valor del atributo: " + image);} |
    <Command: "command">  {System.out.println("Token: Command. Valor del atributo: " + image);} |
    <Compare: "compare">  {System.out.println("Token: Compare. Valor del atributo: " + image);} |
    <Inmutable: "const" | "static">  {System.out.println("Token: Constante. Valor del atributo: " + image);} |
    <ConstCast: "const_cast">  {System.out.println("Token: ConstCast. Valor del atributo: " + image);} |
    <Continuar: "continue">  {System.out.println("Token: Continuar. Valor del atributo: " + image);} |
    <Dia: "day">  {System.out.println("Token: Dia. Valor del atributo: " + image);} |
    <Debugger: "debugger">  {System.out.println("Token: Debugger. Valor del atributo: " + image);} |
    <Declare: "declare">  {System.out.println("Token: Declare. Valor del atributo: " + image);} |
    <Defined: "defined?">  {System.out.println("Token: Defined. Valor del atributo: " + image);} |
    <Del: "del">  {System.out.println("Token: Del. Valor del atributo: " + image);} |
    <Delete: "delete">  {System.out.println("Token: Delete. Valor del atributo: " + image);} |
    <Die: "die">  {System.out.println("Token: Die. Valor del atributo: " + image);} |
    <Doevents: "doevents">  {System.out.println("Token: Doevents. Valor del atributo: " + image);} |
    <Each: "each">  {System.out.println("Token: Each. Valor del atributo: " + image);} |
    <Echo: "echo">  {System.out.println("Token: Echo. Valor del atributo: " + image);} |
    <Eof: "eof"> {System.out.println("Token: Eof. Valor del atributo: " + image);} |
    <Eqv: "eqv"> {System.out.println("Token: Eqv. Valor del atributo: " + image);} |
    <Erase: "erase"> {System.out.println("Token: Erase. Valor del atributo: " + image);} |
    <Error: "error"> {System.out.println("Token: Error. Valor del atributo: " + image);} |
    <Eval: "eval"> {System.out.println("Token: Eval. Valor del atributo: " + image);} |
    <Except: "except"> {System.out.println("Token: Except. Valor del atributo: " + image);} |
    <Exec: "exec"> {System.out.println("Token: Exec. Valor del atributo: " + image);} |
    <Exit: "exit"> {System.out.println("Token: Exit. Valor del atributo: " + image);} |
    <Explicit: "explicit"> |
    <Export: "export"> |
    <Extern: "extern"> |
    <Fileattr: "fileattr"> |
    <FileCopy: "filecopy"> |
    <Final: "final"> |
    <Fix: "fix"> |
    <Fn: "fn"> |
    <Format: "format"> |
    <Freefile: "freefile"> |
    <FriendInLine: "friendinline"> |
    <From: "from"> |
    <Get: "get"> |
    <Global: "global"> |
    <Goto: "goto"> |
    <Import: "import"> |
    <In: "in"> |
    <Include_once: "include_once"> |
    <InstanceOf: "instanceof"> |
    <InsteadOf: "insteadof"> |
    <Interface: "interface"> |
    <Is: "is"> |
    <Isset: "isset"> |
    <Lambda: "lambda"> |
    <Let: "let"> |
    <List: "list"> |
    <Match: "match"> |
    <Module: "module"> |
    <Mutable: "mutable"> |
    <NameSpace: "namespace"> |
    <Native: "native"> |
    <New: "new"> |
    <Next: "next"> |
    <Operator: "operator"> |
    <Package: "package"> |
    <Print: "print"> |
    <Raise: "raise"> |
    <Redo: "redo"> |
    <Register: "register"> |
    <Reinterpret_cast: "reinterpret_cast"> |
    <Require: "require"> |
    <Require_Once: "require_once"> |
    <Rescue: "rescue"> |
    <Retry: "retry"> |
    <Return: "return"> |
    <Seek: "seek"> |
    <Self: "self"> |
    <Set: "set"> |
    <Signed: "signed"> |
    <SizeOf: "sizeof"> |
    <Static_Cast: "static_cast"> |
    <Strictfp: "strictfp"> |
    <Struct: "struct"> |
    <Super: "super"> |
    <Syncronized: "syncronized"> |
    <Tab: "tab"> |
    <Template: "template"> |
    <Then: "then"> |
    <This: "this"> |
    <Throw: "throw"> |
    <Throws: "throws"> |
    <Trait: "trait"> |
    <Tramsent: "tramsent"> |
    <Transient: "transient"> |
    <TypeDef: "typedef"> |
    <TypeId: "typeid"> |
    <TypeName: "typename"> |
    <TypeOf: "typeof"> |
    <Undef: "undef"> |
    <Union: "union"> |
    <Unsigned: "unsigned"> |
    <Use: "use"> |
    <Using: "using"> |
    <Virtual: "virtual"> |
    <Void: "void"> |
    <Volatile: "volatile"> |
    <With: "with"> |
    <Yield: "yield"> |
    
    <Identificador: <letraunica>((<dig>) | (<letraunica>))*> {System.out.println("Token: Identificador. Valor del atributo: " + image);} |
    
    <Numero: (<dig>)+> {System.out.println("Token: Numero. Valor del atributo: " + image);}
}

void Iniciar() :
{
    Token t;
    ArrayList<String> tabla;
    tabla = new ArrayList<String>();
}
{
    (t = <Identificador> {
        String palabra = t.image;
        int i = 0;

        for (; i < tabla.size(); i++)
            if (palabra.equals(tabla.get(i)))
                break;
        
        if (tabla.size() == i)
            tabla.add(palabra);

        System.out.println("-> Identificador (" + Integer.toString(i) + ")");
    } |
    <Absoluto> |
    <Abstracto> |
    <Activar> |
    <Alias> |
    <Ascendiente> |
    <Ensamblador> |
    <Afirmar> |
    <Await> |
    <Base> |
    <Call> |
    <Callable> |
    <Choose> |
    <Class> |
    <Clear> |
    <Clone> |
    <Collection> |
    <Command> |
    <Compare> |
    <Inmutable> |
    <ConstCast> |
    <Continuar> |
    <Dia> |
    <Debugger> |
    <Declare> |
    <Defined> |
    <Del> |
    <Delete> |
    <Die> |
    <Doevents> |
    <Each> |
    <Echo> |
    <Eof> |
    <Eqv> |
    <Erase> |
    <Error> |
    <Eval> |
    <Except> |
    <Exec> |
    <Exit> |
    <Explicit> |
    <Export> |
    <Extern> |
    <Fileattr> |
    <FileCopy> |
    <Final> |
    <Fix> |
    <Fn> |
    <Format> |
    <Freefile> |
    <FriendInLine> |
    <From> |
    <Get> |
    <Global> |
    <Goto> |
    <Import> |
    <In> |
    <Include_once> |
    <InstanceOf> |
    <InsteadOf> |
    <Interface> |
    <Is> |
    <Isset> |
    <Lambda> |
    <Let> |
    <List> |
    <Match> |
    <Module> |
    <Mutable> |
    <NameSpace> |
    <Native> |
    <New> |
    <Next> |
    <Operator> |
    <Package> |
    <Print> |
    <Raise> |
    <Redo> |
    <Register> |
    <Reinterpret_cast> |
    <Require> |
    <Require_Once> |
    <Rescue> |
    <Retry> |
    <Return> |
    <Seek> |
    <Self> |
    <Set> |
    <Signed> |
    <SizeOf> |
    <Static_Cast> |
    <Strictfp> |
    <Struct> |
    <Super> |
    <Syncronized> |
    <Tab> |
    <Template> |
    <Then> |
    <This> |
    <Throw> |
    <Throws> |
    <Trait> |
    <Tramsent> |
    <Transient> |
    <TypeDef> |
    <TypeId> |
    <TypeName> |
    <TypeOf> |
    <Undef> |
    <Union> |
    <Unsigned> |
    <Use> |
    <Using> |
    <Virtual> |
    <Void> |
    <Volatile> |
    <With> |
    <Yield> |
    
    <TipoDato> |
    <Asig> |
    <OperadorLog> |
    <Ciclo> |
    <DecCaso> | 
    <Switch> |
    <Case> |
    <Default> |
    <ComIni> |
    <Operador> |
    <ParIni> |
    <ParFin> |
    <ArrIni> |
    <ArrFin> |
    <CorIni> |
    <ConFin> |
    <Herencia> |
    <Privcidad> |
    <IncDec> |
    <Comis> |
    <Booleano> |
    <Nulo> |
    <Split> |
    <Implode> |
    <FunTri> |
    <Trim> |
    <ManArchivo> |
    <Try> |
    <Catch> |
    <Finally>)+

    <EOF> {
        if (tabla.size() > 0) {
            System.out.println("\nLista de identificadores encontrados");

            for (int i = 0; i < tabla.size(); i++)
                System.out.println("Identificador(" + Integer.toString(i) + ") = " + tabla.get(i));
        }
    }
}
